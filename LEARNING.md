# Rust + Electron + TypeScript Todo åº”ç”¨å­¦ä¹ æŒ‡å—

## ğŸ“ é¡¹ç›®ç»“æ„

```
hello_rust/
â”œâ”€â”€ src/                    # Rust æºä»£ç 
â”‚   â”œâ”€â”€ main.rs            # Rust ä¸»ç¨‹åºï¼ˆæ”¯æŒ CLI å’Œå‘½ä»¤è¡Œæ¨¡å¼ï¼‰
â”‚   â””â”€â”€ todo.rs            # Todo æ•°æ®ç»“æ„å’Œé€»è¾‘
â”œâ”€â”€ electron/               # Electron TypeScript æºç 
â”‚   â””â”€â”€ main.ts            # Electron ä¸»è¿›ç¨‹ï¼ˆçª—å£ç®¡ç† + IPCï¼‰
â”œâ”€â”€ renderer/               # å‰ç«¯æ¸²æŸ“è¿›ç¨‹
â”‚   â”œâ”€â”€ index.html         # ç•Œé¢ HTML
â”‚   â”œâ”€â”€ styles.css         # ç•Œé¢æ ·å¼
â”‚   â””â”€â”€ renderer.ts        # å‰ç«¯ TypeScript é€»è¾‘
â”œâ”€â”€ dist/                   # TypeScript ç¼–è¯‘è¾“å‡ºï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ target/                 # Rust ç¼–è¯‘è¾“å‡ºï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ Cargo.toml             # Rust é¡¹ç›®é…ç½®
â”œâ”€â”€ package.json           # Node.js é¡¹ç›®é…ç½®
â””â”€â”€ tsconfig.json          # TypeScript ç¼–è¯‘é…ç½®
```

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æŠ€æœ¯æ ˆ
- **Rust**: åç«¯é€»è¾‘ï¼ˆæ•°æ®å­˜å‚¨ã€ä»»åŠ¡ç®¡ç†ï¼‰
- **Electron**: æ¡Œé¢åº”ç”¨æ¡†æ¶
- **TypeScript**: å‰ç«¯å’Œä¸»è¿›ç¨‹é€»è¾‘
- **JSON**: æ•°æ®æŒä¹…åŒ–

### é€šä¿¡æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ç”¨æˆ·ç•Œé¢ (renderer.ts)             â”‚
â”‚  - æŒ‰é’®ç‚¹å‡»ã€è¾“å…¥æ¡†                           â”‚
â”‚  - æ˜¾ç¤ºä»»åŠ¡åˆ—è¡¨                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚ IPC (ipcRenderer.invoke)
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Electron ä¸»è¿›ç¨‹ (main.ts)             â”‚
â”‚  - æ¥æ”¶ IPC è¯·æ±‚                              â”‚
â”‚  - è°ƒç”¨ Rust CLI                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚ spawn å­è¿›ç¨‹
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Rust åç«¯ (main.rs)                  â”‚
â”‚  - æ‰§è¡Œå‘½ä»¤ï¼ˆadd/list/complete/removeï¼‰       â”‚
â”‚  - è¯»å†™ JSON æ–‡ä»¶                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å®‰è£…å’Œè¿è¡Œ

### 1. å®‰è£…ä¾èµ–

ç”±äºç½‘ç»œé—®é¢˜ï¼Œä½ éœ€è¦é‡æ–°è¿è¡Œï¼ˆå»ºè®®ä½¿ç”¨å›½å†…é•œåƒï¼‰ï¼š

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨æ·˜å®é•œåƒ
npm config set registry https://registry.npmmirror.com
npm install --save-dev electron typescript @types/node ts-node

# æ–¹æ³•2ï¼šä½¿ç”¨ä»£ç†
# è®¾ç½®ä½ çš„ä»£ç†åå†è¿è¡Œ
npm install --save-dev electron typescript @types/node ts-node
```

### 2. ç¼–è¯‘ Rust

```bash
cargo build --release
```

è¿™ä¼šç”Ÿæˆ `target/release/hello_rust.exe`ï¼ˆWindowsï¼‰

### 3. ç¼–è¯‘ TypeScript

```bash
npm run build:ts
```

è¿™ä¼šå°† `electron/` å’Œ `renderer/` ä¸‹çš„ `.ts` æ–‡ä»¶ç¼–è¯‘åˆ° `dist/`

### 4. è¿è¡Œåº”ç”¨

```bash
npm run dev
```

---

## ğŸ“š ä»£ç å­¦ä¹ è·¯çº¿

### ç¬¬ä¸€é˜¶æ®µï¼šç†è§£ Rust éƒ¨åˆ†

#### 1. **æ•°æ®ç»“æ„** (`src/todo.rs`)

**é‡ç‚¹å­¦ä¹ **ï¼š
- `struct` å®šä¹‰
- `impl` å—ï¼ˆæ–¹æ³•å®ç°ï¼‰
- `serde` åºåˆ—åŒ–/ååºåˆ—åŒ–
- `Result<T, E>` é”™è¯¯å¤„ç†

```rust
#[derive(Serialize, Deserialize)]
pub struct Todo {
    pub id: u32,
    pub title: String,
    pub completed: bool,
}
```

**ç»ƒä¹ ä»»åŠ¡**ï¼š
1. ä¸º Todo æ·»åŠ  `created_at: String` å­—æ®µï¼ˆæ—¶é—´æˆ³ï¼‰
2. å®ç° `toggle()` æ–¹æ³•ï¼ˆåˆ‡æ¢å®ŒæˆçŠ¶æ€ï¼‰

---

#### 2. **å‘½ä»¤è¡Œå‚æ•°è§£æ** (`src/main.rs:10-20`)

**é‡ç‚¹å­¦ä¹ **ï¼š
- `std::env::args()` è·å–å‘½ä»¤è¡Œå‚æ•°
- æ¨¡å¼åŒ¹é… (`match`)
- æ¡ä»¶åˆ†æ”¯

```rust
let args: Vec<String> = env::args().collect();
if args.len() < 2 {
    run_interactive_mode();  // æ— å‚æ•° -> äº¤äº’æ¨¡å¼
} else {
    // æœ‰å‚æ•° -> CLI æ¨¡å¼
}
```

**ç»ƒä¹ ä»»åŠ¡**ï¼š
1. æ·»åŠ  `--version` å‚æ•°æ˜¾ç¤ºç‰ˆæœ¬å·
2. æ·»åŠ  `--help` å‚æ•°æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

---

#### 3. **JSON è¾“å‡º** (`src/main.rs:36-52`)

**é‡ç‚¹å­¦ä¹ **ï¼š
- `serde_json::to_string_pretty()` åºåˆ—åŒ–
- é”™è¯¯å¤„ç† (`match` è¡¨è¾¾å¼)

```rust
match serde_json::to_string_pretty(&todo_list) {
    Ok(json) => println!("{}", json),
    Err(e) => eprintln!("é”™è¯¯: {}", e),
}
```

**ç»ƒä¹ ä»»åŠ¡**ï¼š
1. æ·»åŠ  `export` å‘½ä»¤å¯¼å‡ºä¸º CSV æ ¼å¼
2. æ·»åŠ  `import` å‘½ä»¤ä»æ–‡ä»¶å¯¼å…¥ä»»åŠ¡

---

### ç¬¬äºŒé˜¶æ®µï¼šç†è§£ TypeScript éƒ¨åˆ†

#### 1. **Electron ä¸»è¿›ç¨‹** (`electron/main.ts`)

**é‡ç‚¹å­¦ä¹ **ï¼š
- `BrowserWindow` åˆ›å»ºçª—å£
- `ipcMain.handle()` å¤„ç† IPC è¯·æ±‚
- `child_process.spawn()` è°ƒç”¨å¤–éƒ¨ç¨‹åº

```typescript
ipcMain.handle('add-todo', async (_, title: string) => {
    await callRustCLI(['add', title]);
    return { success: true };
});
```

**ç»ƒä¹ ä»»åŠ¡**ï¼š
1. æ·»åŠ çª—å£å¤§å°ä¿å­˜/æ¢å¤åŠŸèƒ½
2. æ·»åŠ ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡

---

#### 2. **æ¸²æŸ“è¿›ç¨‹** (`renderer/renderer.ts`)

**é‡ç‚¹å­¦ä¹ **ï¼š
- DOM æ“ä½œ (`document.getElementById`)
- å¼‚æ­¥è°ƒç”¨ (`async/await`)
- IPC é€šä¿¡ (`ipcRenderer.invoke`)

```typescript
async function addTodo() {
    const result = await ipcRenderer.invoke('add-todo', title);
    if (result.success) {
        await loadTodos();
    }
}
```

**ç»ƒä¹ ä»»åŠ¡**ï¼š
1. æ·»åŠ ä»»åŠ¡ç¼–è¾‘åŠŸèƒ½ï¼ˆåŒå‡»ä»»åŠ¡å¯ç¼–è¾‘ï¼‰
2. æ·»åŠ ä»»åŠ¡è¿‡æ»¤ï¼ˆæ˜¾ç¤ºå…¨éƒ¨/å·²å®Œæˆ/æœªå®Œæˆï¼‰

---

#### 3. **ç•Œé¢è®¾è®¡** (`renderer/index.html` + `styles.css`)

**é‡ç‚¹å­¦ä¹ **ï¼š
- HTML5 è¯­ä¹‰åŒ–æ ‡ç­¾
- CSS Flexbox å¸ƒå±€
- æ¸å˜èƒŒæ™¯ã€è¿‡æ¸¡åŠ¨ç”»

**ç»ƒä¹ ä»»åŠ¡**ï¼š
1. æ·»åŠ æš—é»‘æ¨¡å¼åˆ‡æ¢
2. æ·»åŠ ä»»åŠ¡æ‹–æ‹½æ’åºåŠŸèƒ½

---

## ğŸ”§ è¿›é˜¶æ‰©å±•

### 1. ä½¿ç”¨ Neon æ›¿ä»£è¿›ç¨‹é€šä¿¡

**å½“å‰æ–¹æ¡ˆé—®é¢˜**ï¼š
- æ¯æ¬¡æ“ä½œéƒ½å¯åŠ¨æ–°çš„ Rust è¿›ç¨‹ï¼ˆæ€§èƒ½å¼€é”€ï¼‰
- è¿›ç¨‹é—´é€šä¿¡é€šè¿‡ stdout/stderrï¼ˆä¸å¤Ÿä¼˜é›…ï¼‰

**Neon æ–¹æ¡ˆ**ï¼š
- å°† Rust ç¼–è¯‘ä¸º Node.js åŸç”Ÿæ¨¡å—
- ç›´æ¥åœ¨ Node.js ä¸­è°ƒç”¨ Rust å‡½æ•°

**å­¦ä¹ èµ„æº**ï¼š
- https://neon-bindings.com/

---

### 2. æ·»åŠ æ•°æ®åº“æ”¯æŒ

**æ›¿æ¢ JSON æ–‡ä»¶**ï¼š
- ä½¿ç”¨ `rusqlite`ï¼ˆSQLiteï¼‰
- æ”¯æŒæ›´å¤æ‚çš„æŸ¥è¯¢å’Œç´¢å¼•

**ç»ƒä¹ ä»»åŠ¡**ï¼š
1. å°† `TodoList::save_to_file()` æ”¹ä¸º `save_to_db()`
2. æ·»åŠ æœç´¢åŠŸèƒ½

---

### 3. äº‘åŒæ­¥åŠŸèƒ½

**æ€è·¯**ï¼š
- Rust ç«¯å®ç° HTTP å®¢æˆ·ç«¯ï¼ˆ`reqwest`ï¼‰
- è¿æ¥åˆ°äº‘ç«¯ APIï¼ˆè‡ªå»ºæˆ–ä½¿ç”¨ Firebaseï¼‰

---

## ğŸ¯ å­¦ä¹ æ£€æŸ¥æ¸…å•

### Rust
- [ ] ç†è§£ `struct` å’Œ `impl`
- [ ] æŒæ¡ `Result<T, E>` é”™è¯¯å¤„ç†
- [ ] ä¼šä½¿ç”¨ `serde` åºåˆ—åŒ–
- [ ] ç†è§£æ‰€æœ‰æƒå’Œå€Ÿç”¨ï¼ˆ`&self` vs `&mut self`ï¼‰
- [ ] ä¼šä½¿ç”¨ `match` æ¨¡å¼åŒ¹é…

### TypeScript
- [ ] ç†è§£ `interface` å’Œç±»å‹æ³¨è§£
- [ ] æŒæ¡ `async/await` å¼‚æ­¥ç¼–ç¨‹
- [ ] ä¼šä½¿ç”¨ DOM API æ“ä½œç•Œé¢
- [ ] ç†è§£ ES6 æ¨¡å—å¯¼å…¥/å¯¼å‡º

### Electron
- [ ] ç†è§£ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹çš„åŒºåˆ«
- [ ] æŒæ¡ IPC é€šä¿¡ï¼ˆ`ipcMain`/`ipcRenderer`ï¼‰
- [ ] ä¼šåˆ›å»ºå’Œç®¡ç†çª—å£
- [ ] äº†è§£å®‰å…¨æœ€ä½³å®è·µï¼ˆ`contextIsolation`ï¼‰

---

## ğŸ’¡ è°ƒè¯•æŠ€å·§

### Rust è°ƒè¯•
```bash
# è¿è¡Œäº¤äº’æ¨¡å¼
cargo run

# æµ‹è¯•å‘½ä»¤è¡Œæ¨¡å¼
cargo run -- list --json
cargo run -- add "æµ‹è¯•ä»»åŠ¡"
```

### TypeScript è°ƒè¯•
- åœ¨ Electron çª—å£æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
- ä½¿ç”¨ `console.log()` è¾“å‡ºè°ƒè¯•ä¿¡æ¯
- åœ¨ VSCode ä¸­è®¾ç½®æ–­ç‚¹

### å¸¸è§é—®é¢˜

**Q: TypeScript ç¼–è¯‘é”™è¯¯**
```bash
# æ¸…ç†å¹¶é‡æ–°ç¼–è¯‘
rm -rf dist
npm run build:ts
```

**Q: Rust å¯æ‰§è¡Œæ–‡ä»¶æ‰¾ä¸åˆ°**
```bash
# ç¡®è®¤è·¯å¾„
ls target/release/
# åº”è¯¥çœ‹åˆ° hello_rust.exeï¼ˆWindowsï¼‰æˆ– hello_rustï¼ˆLinux/Macï¼‰
```

**Q: Electron æ— æ³•å¯åŠ¨**
- æ£€æŸ¥ `package.json` ä¸­çš„ `main` å­—æ®µæ˜¯å¦æŒ‡å‘ `dist/main.js`
- ç¡®è®¤ TypeScript å·²ç¼–è¯‘æˆåŠŸ

---

## ğŸ“– æ¨èå­¦ä¹ èµ„æº

### Rust
- å®˜æ–¹æ•™ç¨‹ï¼šhttps://doc.rust-lang.org/book/
- Rust ç»ƒä¹ é¢˜ï¼šhttps://github.com/rust-lang/rustlings

### TypeScript
- å®˜æ–¹æ‰‹å†Œï¼šhttps://www.typescriptlang.org/docs/
- TypeScript ç»ƒä¹ ï¼šhttps://www.typescriptlang.org/play

### Electron
- å®˜æ–¹æ–‡æ¡£ï¼šhttps://www.electronjs.org/docs
- IPC æ•™ç¨‹ï¼šhttps://www.electronjs.org/docs/latest/tutorial/ipc

---

## ğŸ‰ ä¸‹ä¸€æ­¥

1. **å®ŒæˆåŸºç¡€åŠŸèƒ½**ï¼šç¡®ä¿æ·»åŠ /åˆ é™¤/å®Œæˆä»»åŠ¡éƒ½èƒ½æ­£å¸¸å·¥ä½œ
2. **æ·»åŠ æ–°åŠŸèƒ½**ï¼šä»"ç»ƒä¹ ä»»åŠ¡"ä¸­é€‰æ‹©ä¸€ä¸ªå®ç°
3. **ä¼˜åŒ–ä½“éªŒ**ï¼šæ”¹è¿›ç•Œé¢ã€æ·»åŠ å¿«æ·é”®ã€ä¼˜åŒ–æ€§èƒ½
4. **æ‰“åŒ…å‘å¸ƒ**ï¼šä½¿ç”¨ `electron-builder` æ‰“åŒ…ä¸ºç‹¬ç«‹åº”ç”¨

åŠ æ²¹ï¼ğŸš€
